<div>
	<input
		type="text"
		id="search-input"
		name="q"
		placeholder="SEARCH"
		value="{{ search_query|default:'' }}"
		hx-get="{% url 'main:catalog_all' %}"
		hx-target="#main-content"
		hx-push-url="true"
		hx-trigger="input delay:500ms"
		hx-swap="innerHTML"
	/>
	<button
		hx-get="{% url 'main:catalog_all' %}?reset_search=true"
		hx-target="#search-wrapper, #mobile-search-wrapper"
		hx-swap="innerHTML"
		hx-on::before-request="document.getElementById('search-input').value = ''; document.getElementById('search-input').placeholder = 'SEARCH';"
	>
		Ã—
	</button>
</div>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		const searchInput = document.getElementById('search-input')
		if (searchInput) {
			searchInput.addEventListener('input', function () {
				if (this.value) {
					this.placeholder = ''
				} else {
					this.placeholder = 'SEARCH'
				}
			})
			searchInput.focus()
		}
	})
</script>
